---
/**
 * AskInsureversia â€” Thin Astro wrapper that passes locale, i18n, and page context
 * to the Svelte ChatWidget. Uses client:idle for deferred, non-blocking hydration.
 */
import ChatWidget from './ChatWidget.svelte';
import { t, type Locale } from '../../i18n';
import { getSuggestions } from '../../lib/chat-suggestions';

interface Props {
  locale: Locale;
  pageContext: string;
  pageTitle?: string;
}

const { locale, pageContext, pageTitle = '' } = Astro.props;

const i18n = {
  title: t(locale, 'askInsureversia.title'),
  placeholder: t(locale, 'askInsureversia.placeholder'),
  send: t(locale, 'askInsureversia.send'),
  close: t(locale, 'askInsureversia.close'),
  minimize: t(locale, 'askInsureversia.minimize'),
  greeting: t(locale, 'askInsureversia.greeting'),
  suggestedLabel: t(locale, 'askInsureversia.suggestedLabel'),
  typing: t(locale, 'askInsureversia.typing'),
  usageCount: t(locale, 'askInsureversia.usageCount'),
  limitReached: t(locale, 'askInsureversia.limitReached'),
  limitReachedSub: t(locale, 'askInsureversia.limitReachedSub'),
  errorGeneric: t(locale, 'askInsureversia.errorGeneric'),
  errorNetwork: t(locale, 'askInsureversia.errorNetwork'),
  disclaimer: t(locale, 'askInsureversia.disclaimer'),
  newChat: t(locale, 'askInsureversia.newChat'),
  copyMessage: t(locale, 'askInsureversia.copyMessage'),
  copied: t(locale, 'askInsureversia.copied'),
  // Phase 2: Persona keys
  personaInsureversia: t(locale, 'askInsureversia.personaInsureversia'),
  personaVera: t(locale, 'askInsureversia.personaVera'),
  personaBruno: t(locale, 'askInsureversia.personaBruno'),
  personaZaira: t(locale, 'askInsureversia.personaZaira'),
  personaLocked: t(locale, 'askInsureversia.personaLocked'),
  switchPersona: t(locale, 'askInsureversia.switchPersona'),
  greetingVera: t(locale, 'askInsureversia.greetingVera'),
  greetingBruno: t(locale, 'askInsureversia.greetingBruno'),
  greetingZaira: t(locale, 'askInsureversia.greetingZaira'),
  // Phase 2: Auth keys
  signIn: t(locale, 'askInsureversia.signIn'),
  signUp: t(locale, 'askInsureversia.signUp'),
  signInGoogle: t(locale, 'askInsureversia.signInGoogle'),
  signInEmail: t(locale, 'askInsureversia.signInEmail'),
  signUpEmail: t(locale, 'askInsureversia.signUpEmail'),
  emailLabel: t(locale, 'askInsureversia.emailLabel'),
  passwordLabel: t(locale, 'askInsureversia.passwordLabel'),
  nameLabel: t(locale, 'askInsureversia.nameLabel'),
  signOut: t(locale, 'askInsureversia.signOut'),
  signedInAs: t(locale, 'askInsureversia.signedInAs'),
  authError: t(locale, 'askInsureversia.authError'),
  // Phase 2: Upgrade keys
  upgradeForPersonas: t(locale, 'askInsureversia.upgradeForPersonas'),
  upgradeForMore: t(locale, 'askInsureversia.upgradeForMore'),
  // Phase 2: History keys
  history: t(locale, 'askInsureversia.history'),
  noHistory: t(locale, 'askInsureversia.noHistory'),
  resumeChat: t(locale, 'askInsureversia.resumeChat'),
  deleteChat: t(locale, 'askInsureversia.deleteChat'),
  conversationsTitle: t(locale, 'askInsureversia.conversationsTitle'),
};

const suggestions = getSuggestions(locale, pageContext);
---

<ChatWidget
  client:idle
  locale={locale}
  i18n={i18n}
  pageContext={pageContext}
  pageTitle={pageTitle}
  suggestions={suggestions}
/>
