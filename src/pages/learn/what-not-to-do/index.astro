---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import ContentEngagement from '../../../components/ContentEngagement.astro';
import CommentSection from '../../../components/CommentSection.svelte';
import { getCollection } from 'astro:content';
import { t, getLocalePath } from '../../../i18n';
const locale = 'en';
const p = (path: string) => getLocalePath(locale, path);

const entries = (await getCollection('what-not-to-do'))
  .filter(entry => entry.id.startsWith('en/'))
  .sort((a, b) => a.data.number - b.data.number);
---

<BaseLayout
  title="What Not to Do with AI in Insurance"
  description="10 critical mistakes to avoid when using AI in insurance. Real examples, real consequences, and clear guidance on staying safe."
  locale={locale}
  keywords="AI mistakes insurance, AI risks, what not to do AI, insurance AI dangers, AI compliance"
>
  <!-- Hero -->
  <section class="hero" style="background: linear-gradient(135deg, rgba(15,43,70,0.88) 0%, rgba(45,55,72,0.78) 100%), url('/assets/images/hero-images/hero-image-challenges.png') top/cover no-repeat;">
    <div class="container" style="position: relative; z-index: 1;">
      <div class="slide-up" style="max-width: 800px;">
        <p class="text-sm font-semibold mb-4" style="color: var(--color-secondary); text-transform: uppercase; letter-spacing: 0.1em;">Learn</p>
        <h1 style="font-size: var(--text-5xl); margin-bottom: var(--space-6);">The Red Lines: What Not to Do</h1>
        <p class="lead" style="margin-bottom: var(--space-6);">
          AI is powerful, but power without guardrails is dangerous. These are the ten mistakes that can cost you your reputation, your compliance standing, and your policyholders' trust. Learn them before you make them.
        </p>
      </div>
    </div>
    <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 120px; background: linear-gradient(to top, var(--surface-page), transparent);"></div>
  </section>

  <!-- Intro -->
  <section class="section--sm">
    <div class="container">
      <div class="callout callout--danger reveal" style="max-width: 800px; margin: 0 auto;">
        <p style="font-size: var(--text-lg); margin-bottom: 0; line-height: var(--leading-relaxed);">
          <strong>Each entry below is based on real incidents, documented regulatory actions, or well-established risks.</strong> This is not theoretical fear-mongering â€” it is practical guidance grounded in what has already gone wrong in the insurance and financial services industries.
        </p>
      </div>
    </div>
  </section>

  <!-- Danger Cards -->
  <section class="section">
    <div class="container">
      <div style="display: flex; flex-direction: column; gap: var(--space-8); max-width: 900px; margin: 0 auto;" class="reveal-stagger">
        {entries.map((entry) => (
          <article class="card" style="padding: var(--space-8); border-left: 4px solid var(--color-error);">
            <div style="display: flex; align-items: flex-start; gap: var(--space-4);">
              <div class="number-badge" style="background: var(--color-error); color: white; margin-top: var(--space-1); flex-shrink: 0;">
                {entry.data.number}
              </div>
              <div style="flex: 1;">
                <h2 style="font-size: var(--text-2xl); margin-bottom: var(--space-3); color: var(--color-error);">
                  {entry.data.title}
                </h2>
                <p style="font-size: var(--text-lg); color: var(--text-secondary); margin-bottom: var(--space-4); line-height: var(--leading-relaxed);">
                  {entry.data.description}
                </p>

                <div style="margin-bottom: var(--space-4); padding: var(--space-4); background: var(--surface-parchment); border-radius: var(--radius-md);">
                  <h4 style="font-size: var(--text-sm); text-transform: uppercase; letter-spacing: 0.05em; color: var(--color-error); margin-bottom: var(--space-2);">Risk</h4>
                  <p style="color: var(--text-secondary); margin-bottom: 0; font-weight: var(--font-semibold);">{entry.data.risk}</p>
                </div>

                <div style="margin-bottom: var(--space-4);">
                  <h4 style="font-size: var(--text-base); font-weight: var(--font-semibold); margin-bottom: var(--space-2); color: var(--color-primary);">Real-World Example</h4>
                  <p style="color: var(--text-secondary); line-height: var(--leading-relaxed);">{entry.data.realExample}</p>
                </div>

                <div style="margin-bottom: var(--space-4);">
                  <h4 style="font-size: var(--text-base); font-weight: var(--font-semibold); margin-bottom: var(--space-2); color: var(--color-success-dark);">What to Do Instead</h4>
                  <p style="color: var(--text-secondary); line-height: var(--leading-relaxed);">{entry.data.mitigation}</p>
                </div>

                {entry.data.insureversiasTake && (
                  <div style="padding: var(--space-4); background: linear-gradient(135deg, rgba(15,43,70,0.05), rgba(201,168,76,0.05)); border-radius: var(--radius-md); border-left: 3px solid var(--color-secondary);">
                    <h4 style="font-size: var(--text-sm); font-weight: var(--font-bold); color: var(--color-secondary); margin-bottom: var(--space-2);">Insureversia's Take</h4>
                    <p style="color: var(--text-secondary); line-height: var(--leading-relaxed); margin-bottom: 0; font-style: italic;">{entry.data.insureversiasTake}</p>
                  </div>
                )}
              </div>
              <div style="margin-top: var(--space-4); padding-top: var(--space-4); border-top: 1px solid var(--border-light);">
                <ContentEngagement
                  contentType="what-not-to-do"
                  contentId={`what-not-to-do-${entry.data.number}`}
                  shareTitle={entry.data.title}
                  locale={locale}
                />
              </div>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="section section--parchment">
    <div class="container text-center">
      <div class="reveal" style="max-width: 600px; margin: 0 auto;">
        <h2 style="margin-bottom: var(--space-4);">Now Learn What You Should Do</h2>
        <p style="font-size: var(--text-lg); color: var(--text-secondary); margin-bottom: var(--space-6);">
          Knowing what to avoid is only half the equation. Our "What to Do" playbook gives you the positive, practical guide to using AI effectively and responsibly.
        </p>
        <div class="flex gap-4 flex--wrap" style="justify-content: center;">
          <a href={p('/learn/what-to-do/')} class="btn btn--primary">The Playbook: What to Do</a>
          <a href={p('/practice/quick-wins/')} class="btn btn--secondary">Try a Quick Win</a>
        </div>
        <p style="margin-top: var(--space-4); font-size: var(--text-sm); color: var(--text-muted);">
          {t(locale, 'learningProgram.programCta')}
          <a href={p('/learn/program/')} style="font-weight: var(--font-semibold);">
            {t(locale, 'learningProgram.programCtaLink')} &rarr;
          </a>
        </p>
      </div>
    </div>
  </section>

  <section class="section" style="max-width: var(--max-width, 1200px); margin: 0 auto; padding: 0 var(--space-6);">
    <CommentSection
      client:visible
      contentType="what-not-to-do"
      contentId="what-not-to-do-page"
      locale={locale}
      labels={{
        title: t(locale, 'comments.title'),
        placeholder: t(locale, 'comments.placeholder'),
        submit: t(locale, 'comments.submit'),
        submitting: t(locale, 'comments.submitting'),
        loginRequired: t(locale, 'comments.loginRequired'),
        loginButton: t(locale, 'comments.loginButton'),
        pendingMessage: t(locale, 'comments.pendingMessage'),
        noComments: t(locale, 'comments.noComments'),
        commentSubmitted: t(locale, 'comments.commentSubmitted'),
        displayNameLabel: t(locale, 'comments.displayNameLabel'),
        characterCount: t(locale, 'comments.characterCount'),
        loadingComments: t(locale, 'comments.loadingComments'),
        moderationNote: t(locale, 'comments.moderationNote'),
      }}
    />
  </section>
</BaseLayout>
